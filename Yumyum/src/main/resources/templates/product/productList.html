<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="yumyum/layout/basic">
    <th:block layout:fragment="title">
        <title>제품 목록</title>
    </th:block>


    <th:block layout:fragment="content">

            

        
        <!-- -------------------------------------------------------- -->
<!--         <th:block>
        <div th:replace="product/common:: search"></div>
        </th:block> -->
        <!-- -------------------------------------------------------- -->
        
        <div class="container">
            <h2>제품 목록</h2>
            <!-- <label for="codeId">분류</label>
            <span class="col-sm-6" id="selectList">
               <select>
                   <option>선택해주세요</option>
                   <option value="b1">커피</option>
                   <option value="b2">스무디</option>
               </select>
              <select id="good" name="codeId">
                   <option >------</option>
               </select>
                <button>검색</button> 
            </span> -->             
            
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th class="col-sm-1" >선택사항</th>
                        <th class="col-sm-1">상품번호</th>
                        <th>분류</th>
                        <th>제품명</th>
                        <th>가격</th>
                        <th>상세정보</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${not #lists.isEmpty( productList )}" th:each="row : ${productList}" >
                        <td><input type="checkbox"></td>
                        <td scope="row" th:text="${row.productNum}"></td>
                        <td class="text-left" th:text="${row.codeId}"></td>
                        <td class="text-left" th:text="${row.name}"></td>
                        <td th:text="${#numbers.formatInteger(row.price,3,'COMMA')+'원'}"></td>
                        <!-- <td th:text="${row.info}"></td> -->
                        <td>
                            <button th:onclick="|location.href='@{/product/view( productNum=${row.productNum} )}'|" id="btn_info">상세정보보기</button>
                            <!--< button th:onclick="|location.href='@{/product/view(params.makeQueryString(params.currentPageNo)&(productNum=${row.productNum}'|">상세정보보기</button> -->
                        </td>
                    </tr>

                    <tr th:unless="${not #lists.isEmpty( productList )}">
                        <td colspan="5">조회된 결과가 없습니다.</td>
                    </tr>
                </tbody>
            </table>

            <div class="btn_wrap1">
                <a class="btn btn-dark" onclick="explain1()" id="openModal1">다중수정</a>
            </div>
            <div class="btn_wrap2" style="text-align:right;">
                <a th:href="@{/product/write}" class="btn btn-dark">제품등록</a>
            </div>
            <div class="modal1">
              <button class="close1">X</button>
              <h4 title="mTitle">다중수정</h4><br>
              <h6>다중 수정은 가격만 가능합니다.</h6><br>
              가격:&nbsp;<input type="number"><br>
              <button style="margin:auto; display:block;">수정하기</button>
            </div>  
        </div>
        <br>
        <nav th:replace="product/common :: pagination"></nav> 
        
    </th:block>

<th:block layout:fragment="script">
    <script  th:inline="javascript">
    /*<![CDATA[*/
  /*  function test(){
        console.log(0)
        $("#commentModal").modal("toggle"); 
    } */
    
    
    
    //페이징
    function movePage(uri, queryString) {
        location.href = uri + queryString;
    }
    
    //검색
    function searchBoard(form) {
            /*[- 드롭다운이 아닌 메인 검색 키워드로 검색했을 때 -]*/
            if (isEmpty(form) == true) {
                var searchKeyword = document.getElementById("mainSearchKeyword");
                if (isEmpty(searchKeyword.value) == true) {
                    alert("키워드를 입력해 주세요.");
                    searchKeyword.focus();
                    return false;
                }

                form = document.getElementById("searchForm");
                form.searchKeyword.value = searchKeyword.value;
                form.submit();
            }

            if (isEmpty(form.searchKeyword.value) == true) {
                alert("키워드를 입력해 주세요.");
                form.searchKeyword.focus();
                return false;
            }
        }

    /*]]>*/


    function searchBoard(form) {
        /*[- 드롭다운이 아닌 메인 검색 키워드로 검색했을 때 -]*/
        if (isEmpty(form) == true) {
            var searchKeyword = document.getElementById("mainSearchKeyword");
            if (isEmpty(searchKeyword.value) == true) {
                alert("키워드를 입력해 주세요.");
                searchKeyword.focus();
                return false;
            }

            form = document.getElementById("searchForm");
            form.searchKeyword.value = searchKeyword.value;
            form.submit();
        }

        if (isEmpty(form.searchKeyword.value) == true) {
            alert("키워드를 입력해 주세요.");
            form.searchKeyword.focus();
            return false;
        }
    }
    
    // 모달1
    const modal1 = document.querySelector(".modal1");
    const closeBtn1 = document.querySelector(".close1");
    
    
    closeBtn1.onclick = function(){
      modal1.style.display = "none";
      }
    //모달창 오픈 func
    function explain1(){
      modal1.style.display = "block";
    }
    $(function() {
          $(".modal1" ).draggable();
    });
    
    /*[- end of function -]*/

    /*]]>*/
    </script>
    </th:block>

</html>